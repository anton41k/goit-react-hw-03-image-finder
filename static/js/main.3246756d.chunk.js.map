{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/LoaderGalery.module.css","components/Button/Button.module.css","components/GalleryImage/GalleryImage.module.css","view/GalleryView.module.css","components/Loader/LoaderGalery.jsx","components/Button/Button.jsx","components/Searchbar/Searchbar.jsx","services/gallery-api.jsx","components/Modal/Modal.jsx","components/GalleryImage/GalleryImage.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","view/GalleryView.jsx","App.js","index.js"],"names":["module","exports","LoaderGalery","className","css","container_loader","type","color","height","width","Button","this","props","text","onClick","Provider","value","size","Component","SearchForm","state","query","handleChange","e","setState","currentTarget","toLowerCase","handleSubmit","preventDefault","onSubmit","searchbar","search_form","search_form_input","autoComplete","autoFocus","placeholder","onChange","searchQuery","currentPage","pageSize","BASE_URL","trim","fetch","then","response","json","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","event","target","window","addEventListener","removeEventListener","imgModal","imgUrl","imgAlt","createPortal","modal_backdrop","modal_content","src","alt","modal_img","GalleryImage","gallery_list","children","ImageGallery","gallery","map","el","photo_card","webformatURL","tags","photo_img","id","GalleryView","isLoading","error","showModal","onChangeQuery","fetchGallery","options","galleryApi","hits","length","toast","prevState","catch","finally","showScroll","cardHeight","firstElementChild","getBoundingClientRect","yOffset","pageYOffset","scrollTo","top","behavior","toggleModal","img","largeImageURL","prevProps","shouldRenderLoadMoreButton","container","Searchbar","App","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3246756d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1MPLn\",\"search_form\":\"Searchbar_search_form__lAleK\",\"search_form_input\":\"Searchbar_search_form_input__EUqZY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_backdrop\":\"Modal_modal_backdrop__1Nb_i\",\"modal_content\":\"Modal_modal_content__2FV5E\",\"modal_img\":\"Modal_modal_img__2-apz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photo_card\":\"ImageGalleryItem_photo_card__2dw2y\",\"photo_img\":\"ImageGalleryItem_photo_img__39_8u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container_loader\":\"LoaderGalery_container_loader___o70M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"load_more\":\"Button_load_more__2hOlE\",\"search_btn\":\"Button_search_btn__1jzu3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery_list\":\"GalleryImage_gallery_list__2oFzk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"GalleryView_container__3iay3\"};","import React from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nimport css from \"./LoaderGalery.module.css\";\n\nconst LoaderGalery = () => {\n  return (\n    <div className={css.container_loader}>\n      <Loader type=\"Watch\" color=\"#00BFFF\" height={100} width={100} />\n    </div>\n  );\n};\n\nexport default LoaderGalery;\n","import React, { Component } from \"react\";\nimport { ImSearch } from \"react-icons/im\";\nimport { IconContext } from \"react-icons\";\n\nimport css from \"./Button.module.css\";\n\nexport default class Button extends Component {\n  render() {\n    const { type, text, className } = this.props;\n    let onClick = this.props.onClick ? this.props.onClick : null;\n\n    return (\n      <button type={type} className={css[className]} onClick={onClick}>\n        {text ? (\n          text\n        ) : (\n          <IconContext.Provider value={{ size: \"1.4em\", color: \"gray\" }}>\n            <ImSearch />\n          </IconContext.Provider>\n        )}\n      </button>\n    );\n  }\n}\n","import React, { Component } from \"react\";\n\nimport Button from \"../Button/Button\";\n\nimport css from \"./Searchbar.module.css\";\n\nclass SearchForm extends Component {\n  state = { query: \"\" };\n\n  handleChange = (e) => {\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: \"\" });\n  };\n\n  render() {\n    return (\n      <header className={css.searchbar}>\n        <form className={css.search_form} onSubmit={this.handleSubmit}>\n          <Button type=\"submit\" className=\"search_btn\" />\n          <input\n            className={css.search_form_input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default SearchForm;\n","const fetchGallery = ({ searchQuery = \"\", currentPage = 1, pageSize = 12 }) => {\n  const url = \"https://pixabay.com/api/\";\n  const key = \"22580473-9722fdac11ed5197610aea928\";\n  const options = \"image_type=photo&orientation=horizontal\";\n  const BASE_URL = `${url}?q=${searchQuery.trim()}&page=${currentPage}&key=${key}&${options}&per_page=${pageSize}`;\n  return fetch(BASE_URL).then((response) => response.json());\n};\n\nexport default { fetchGallery };\n","import React, { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport css from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = (event) => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { imgUrl, imgAlt } = this.props.imgModal;\n    return createPortal(\n      <div className={css.modal_backdrop} onClick={this.handleBackdropClick}>\n        <div className={css.modal_content}>\n          <img src={imgUrl} alt={imgAlt} className={css.modal_img} />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n","import { Component } from \"react\";\n\nimport css from \"./GalleryImage.module.css\";\n\nexport default class GalleryImage extends Component {\n  render() {\n    return <ul className={css.gallery_list}>{this.props.children}</ul>;\n  }\n}\n","import { Component } from \"react\";\n\nimport css from \"./ImageGalleryItem.module.css\";\n\nexport default class ImageGallery extends Component {\n  render() {\n    const gallery = this.props.gallery;\n    const onClick = this.props.onClick ? this.props.onClick : null;\n    return (\n      <>\n        {gallery.map((el) => (\n          <li\n            key={`${el.id}${el.webformatURL}`}\n            onClick={() => this.props.onClick(el)}\n            className={css.photo_card}\n          >\n            <img\n              src={el.webformatURL}\n              alt={el.tags}\n              className={css.photo_img}\n            />\n          </li>\n        ))}\n      </>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport LoaderGalery from \"../components/Loader/LoaderGalery\";\nimport Searchbar from \"../components/Searchbar/Searchbar\";\nimport galleryApi from \"../services/gallery-api\";\nimport Button from \"../components/Button/Button\";\nimport Modal from \"../components/Modal/Modal\";\nimport GalleryImage from \"../components/GalleryImage/GalleryImage\";\nimport ImageGalleryItem from \"../components/ImageGalleryItem/ImageGalleryItem\";\n\nimport css from \"./GalleryView.module.css\";\n\nclass GalleryView extends Component {\n  state = {\n    gallery: [],\n    currentPage: 1,\n    pageSize: 12,\n    searchQuery: \"\",\n    isLoading: false,\n    error: null,\n    showModal: false,\n    imgModal: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      if (this.state.searchQuery === \"\") {\n        return toast.error(\"Search must not be empty!\");\n      }\n      this.fetchGallery();\n    }\n    if (\n      prevState.searchQuery === this.state.searchQuery &&\n      this.state.searchQuery === \"\"\n    ) {\n      toast.error(\"Search must not be empty!\");\n    }\n  }\n\n  onChangeQuery = (query) => {\n    this.setState({\n      searchQuery: query.trim(),\n      currentPage: 1,\n      gallery: [],\n      error: null,\n    });\n  };\n\n  fetchGallery = () => {\n    const { currentPage, searchQuery, pageSize } = this.state;\n    const options = { searchQuery, currentPage, pageSize };\n\n    this.setState({ isLoading: true });\n\n    galleryApi\n      .fetchGallery(options)\n      .then((gallery) => {\n        if (!gallery.hits.length) {\n          return toast.error(\n            `The given request ${searchQuery} is not available!!!`\n          );\n        }\n        this.setState((prevState) => ({\n          gallery: [...prevState.gallery, ...gallery.hits],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch((error) => this.setState({ error }))\n      .finally(() => {\n        this.setState({ isLoading: false });\n        this.showScroll(currentPage);\n      });\n  };\n\n  showScroll = (currentPage) => {\n    if (currentPage > 1) {\n      const cardHeight = document\n        .querySelector(\"ul\")\n        .firstElementChild.getBoundingClientRect().height;\n      const yOffset = window.pageYOffset; // текущее положение скролбара\n      window.scrollTo({\n        top: yOffset + cardHeight * 2,\n        behavior: \"smooth\",\n      });\n    }\n  };\n\n  toggleModal = (img) => {\n    const imgModal = img\n      ? { imgUrl: img.largeImageURL, imgAlt: img.tags }\n      : null;\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n      imgModal: imgModal,\n    }));\n  };\n\n  render() {\n    const { gallery, isLoading, showModal, imgModal, pageSize } = this.state;\n    const shouldRenderLoadMoreButton =\n      gallery.length > pageSize - 1 && !isLoading;\n    return (\n      <div className={css.container}>\n        <Searchbar onSubmit={this.onChangeQuery} />\n\n        <GalleryImage>\n          <ImageGalleryItem gallery={gallery} onClick={this.toggleModal} />\n        </GalleryImage>\n\n        {showModal && <Modal onClose={this.toggleModal} imgModal={imgModal} />}\n\n        {isLoading && <LoaderGalery />}\n\n        {shouldRenderLoadMoreButton && (\n          <Button\n            type=\"button\"\n            onClick={this.fetchGallery}\n            text=\"Load more\"\n            className=\"load_more\"\n            isLoading={!isLoading}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default GalleryView;\n","import React from \"react\";\n//import { Switch, Route, Link } from 'react-router-dom';\n//import TodosView from './views/TodosView';\nimport { ToastContainer } from \"react-toastify\";\nimport GalleryView from \"./view/GalleryView\";\n\nconst App = () => (\n  <>\n    <GalleryView />\n    <ToastContainer position=\"top-right\" autoClose={3000} />\n  </>\n);\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}