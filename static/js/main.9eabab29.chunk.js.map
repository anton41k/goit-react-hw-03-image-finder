{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/LoaderGalery.module.css","components/Button/Button.module.css","components/GalleryImage/GalleryImage.module.css","view/GalleryView.module.css","components/Loader/LoaderGalery.jsx","components/Button/Button.jsx","components/Searchbar/Searchbar.jsx","services/gallery-api.jsx","components/Modal/Modal.jsx","components/GalleryImage/GalleryImage.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","images/loadImg.gif","components/GalleryPendingView/GalleryPendingView.jsx","view/GalleryView.jsx","App.js","index.js"],"names":["module","exports","LoaderGalery","className","css","container_loader","type","color","height","width","Button","this","props","text","onClick","Provider","value","size","Component","SearchForm","state","query","handleChange","e","setState","currentTarget","toLowerCase","handleSubmit","preventDefault","onSubmit","searchbar","search_form","search_form_input","autoComplete","autoFocus","placeholder","onChange","searchQuery","currentPage","pageSize","BASE_URL","trim","fetch","then","response","json","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","event","target","window","addEventListener","body","style","overflow","removeEventListener","imgModal","imgUrl","imgAlt","createPortal","modal_backdrop","modal_content","src","alt","modal_img","GalleryImage","gallery_list","children","ImageGallery","gallery","map","el","photo_card","webformatURL","tags","photo_img","id","GalleryPendingView","index","galleryRes","loadImg","console","log","push","GalleryView","isLoading","error","showModal","onChangeQuery","fetchGallery","options","galleryApi","hits","length","toast","prevState","catch","finally","showScroll","cardHeight","firstElementChild","getBoundingClientRect","yOffset","pageYOffset","scrollTo","top","behavior","toggleModal","img","largeImageURL","prevProps","shouldRenderLoadMoreButton","container","Searchbar","App","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9eabab29.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1MPLn\",\"search_form\":\"Searchbar_search_form__lAleK\",\"search_form_input\":\"Searchbar_search_form_input__EUqZY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_backdrop\":\"Modal_modal_backdrop__1Nb_i\",\"modal_content\":\"Modal_modal_content__2FV5E\",\"modal_img\":\"Modal_modal_img__2-apz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photo_card\":\"ImageGalleryItem_photo_card__2dw2y\",\"photo_img\":\"ImageGalleryItem_photo_img__39_8u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container_loader\":\"LoaderGalery_container_loader___o70M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"load_more\":\"Button_load_more__2hOlE\",\"search_btn\":\"Button_search_btn__1jzu3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery_list\":\"GalleryImage_gallery_list__2oFzk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"GalleryView_container__3iay3\"};","import React from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nimport css from \"./LoaderGalery.module.css\";\n\nconst LoaderGalery = () => {\n  return (\n    <div className={css.container_loader}>\n      <Loader type=\"Watch\" color=\"#00BFFF\" height={100} width={100} />\n    </div>\n  );\n};\n\nexport default LoaderGalery;\n","import React, { Component } from \"react\";\nimport { ImSearch } from \"react-icons/im\";\nimport { IconContext } from \"react-icons\";\n\nimport css from \"./Button.module.css\";\n\nexport default class Button extends Component {\n  render() {\n    const { type, text, className } = this.props;\n    let onClick = this.props.onClick ? this.props.onClick : null;\n\n    return (\n      <button type={type} className={css[className]} onClick={onClick}>\n        {text ? (\n          text\n        ) : (\n          <IconContext.Provider value={{ size: \"1.4em\", color: \"gray\" }}>\n            <ImSearch />\n          </IconContext.Provider>\n        )}\n      </button>\n    );\n  }\n}\n","import React, { Component } from \"react\";\n\nimport Button from \"../Button/Button\";\n\nimport css from \"./Searchbar.module.css\";\n\nclass SearchForm extends Component {\n  state = { query: \"\" };\n\n  handleChange = (e) => {\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: \"\" });\n  };\n\n  render() {\n    return (\n      <header className={css.searchbar}>\n        <form className={css.search_form} onSubmit={this.handleSubmit}>\n          <Button type=\"submit\" className=\"search_btn\" />\n          <input\n            className={css.search_form_input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default SearchForm;\n","const fetchGallery = ({ searchQuery = \"\", currentPage = 1, pageSize = 12 }) => {\n  const url = \"https://pixabay.com/api/\";\n  const key = \"22580473-9722fdac11ed5197610aea928\";\n  const options = \"image_type=photo&orientation=horizontal\";\n  const BASE_URL = `${url}?q=${searchQuery.trim()}&page=${currentPage}&key=${key}&${options}&per_page=${pageSize}`;\n  return fetch(BASE_URL).then((response) => response.json());\n};\n\nexport default { fetchGallery };\n","import React, { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport css from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n    document.body.style.overflow = \"hidden\";\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n    document.body.style.overflow = \"visible\";\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = (event) => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { imgUrl, imgAlt } = this.props.imgModal;\n    return createPortal(\n      <div className={css.modal_backdrop} onClick={this.handleBackdropClick}>\n        <div className={css.modal_content}>\n          <img src={imgUrl} alt={imgAlt} className={css.modal_img} />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n","import { Component } from \"react\";\n\nimport css from \"./GalleryImage.module.css\";\n\nexport default class GalleryImage extends Component {\n  render() {\n    return <ul className={css.gallery_list}>{this.props.children}</ul>;\n  }\n}\n","import { Component } from \"react\";\n\nimport css from \"./ImageGalleryItem.module.css\";\n\nexport default class ImageGallery extends Component {\n  render() {\n    const gallery = this.props.gallery;\n    return (\n      <>\n        {gallery.map((el) => (\n          <li\n            key={`${el.id}${el.webformatURL}`}\n            onClick={() => this.props.onClick(el)}\n            className={css.photo_card}\n          >\n            <img\n              src={el.webformatURL}\n              alt={el.tags}\n              className={css.photo_img}\n            />\n          </li>\n        ))}\n      </>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/loadImg.28fb70f6.gif\";","import ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport loadImg from \"../../images/loadImg.gif\";\n\nexport default function GalleryPendingView() {\n  const gallery = [];\n  for (let index = 0; index < 12; index++) {\n    const galleryRes = {\n      id: \"\",\n      webformatURL: loadImg,\n      tags: \"loading\",\n    };\n    console.log(index);\n    galleryRes.id = index;\n    console.log(galleryRes);\n    gallery.push(galleryRes);\n    console.log(gallery);\n  }\n  console.log(gallery);\n  return <ImageGalleryItem gallery={gallery} onClick={null} />;\n}\n","import React, { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport LoaderGalery from \"../components/Loader/LoaderGalery\";\nimport Searchbar from \"../components/Searchbar/Searchbar\";\nimport galleryApi from \"../services/gallery-api\";\nimport Button from \"../components/Button/Button\";\nimport Modal from \"../components/Modal/Modal\";\nimport GalleryImage from \"../components/GalleryImage/GalleryImage\";\nimport ImageGalleryItem from \"../components/ImageGalleryItem/ImageGalleryItem\";\n\nimport css from \"./GalleryView.module.css\";\nimport GalleryPendingView from \"../components/GalleryPendingView/GalleryPendingView\";\n\nclass GalleryView extends Component {\n  state = {\n    gallery: [],\n    currentPage: 1,\n    pageSize: 12,\n    searchQuery: \"\",\n    isLoading: false,\n    error: null,\n    showModal: false,\n    imgModal: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      if (this.state.searchQuery === \"\") {\n        return toast.error(\"Search must not be empty!\");\n      }\n      this.fetchGallery();\n    }\n    if (\n      prevState.searchQuery === this.state.searchQuery &&\n      this.state.searchQuery === \"\"\n    ) {\n      toast.error(\"Search must not be empty!\");\n    }\n  }\n\n  onChangeQuery = (query) => {\n    this.setState({\n      searchQuery: query.trim(),\n      currentPage: 1,\n      gallery: [],\n      error: null,\n    });\n  };\n\n  fetchGallery = () => {\n    const { currentPage, searchQuery, pageSize } = this.state;\n    const options = { searchQuery, currentPage, pageSize };\n\n    this.setState({ isLoading: true });\n\n    galleryApi\n      .fetchGallery(options)\n      .then((gallery) => {\n        if (!gallery.hits.length) {\n          return toast.error(\n            `The given request ${searchQuery} is not available!!!`\n          );\n        }\n        this.setState((prevState) => ({\n          gallery: [...prevState.gallery, ...gallery.hits],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch((error) => this.setState({ error }))\n      .finally(() => {\n        this.setState({ isLoading: false });\n        this.showScroll(currentPage);\n      });\n  };\n\n  showScroll = (currentPage) => {\n    if (currentPage > 1) {\n      const cardHeight = document\n        .querySelector(\"ul\")\n        .firstElementChild.getBoundingClientRect().height;\n      const yOffset = window.pageYOffset; // текущее положение скролбара\n      window.scrollTo({\n        top: yOffset + cardHeight * 2,\n        behavior: \"smooth\",\n      });\n    }\n  };\n\n  toggleModal = (img) => {\n    const imgModal = img\n      ? { imgUrl: img.largeImageURL, imgAlt: img.tags }\n      : null;\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n      imgModal: imgModal,\n    }));\n  };\n\n  render() {\n    const { gallery, isLoading, showModal, imgModal, pageSize } = this.state;\n    const shouldRenderLoadMoreButton =\n      gallery.length > pageSize - 1 && !isLoading;\n    return (\n      <div className={css.container}>\n        <Searchbar onSubmit={this.onChangeQuery} />\n\n        <GalleryImage>\n          {isLoading ? (\n            <GalleryPendingView />\n          ) : (\n            <ImageGalleryItem gallery={gallery} onClick={this.toggleModal} />\n          )}\n        </GalleryImage>\n\n        {showModal && <Modal onClose={this.toggleModal} imgModal={imgModal} />}\n\n        {isLoading && <LoaderGalery />}\n\n        {shouldRenderLoadMoreButton && (\n          <Button\n            type=\"button\"\n            onClick={this.fetchGallery}\n            text=\"Load more\"\n            className=\"load_more\"\n            isLoading={!isLoading}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default GalleryView;\n","import React from \"react\";\r\n\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport GalleryView from \"./view/GalleryView\";\r\n\r\nconst App = () => (\r\n  <>\r\n    <GalleryView />\r\n    <ToastContainer position=\"top-right\" autoClose={3000} />\r\n  </>\r\n);\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}