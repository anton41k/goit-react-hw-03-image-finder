{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/LoaderGalery.module.css","components/Button/Button.module.css","components/GalleryImage/GalleryImage.module.css","view/GalleryView.module.css","components/Loader/LoaderGalery.jsx","components/Button/Button.jsx","components/Searchbar/Searchbar.jsx","services/gallery-api.jsx","components/Modal/Modal.jsx","components/GalleryImage/GalleryImage.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","view/GalleryView.jsx","App.js","index.js"],"names":["module","exports","LoaderGalery","className","css","container_loader","type","color","height","width","Button","this","props","text","onClick","Provider","value","size","Component","SearchForm","state","query","handleChange","e","setState","currentTarget","toLowerCase","handleSubmit","preventDefault","onSubmit","searchbar","search_form","search_form_input","autoComplete","autoFocus","placeholder","onChange","searchQuery","currentPage","pageSize","BASE_URL","trim","fetch","then","response","json","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","event","target","window","addEventListener","removeEventListener","imgModal","imgUrl","imgAlt","createPortal","modal_backdrop","modal_content","src","alt","modal_img","GalleryImage","gallery_list","children","ImageGallery","gallery","map","el","photo_card","webformatURL","tags","photo_img","id","GalleryView","isLoading","error","showModal","onChangeQuery","fetchGallery","options","galleryApi","hits","length","toast","prevState","catch","finally","showScroll","cardHeight","firstElementChild","getBoundingClientRect","yOffset","pageYOffset","scrollTo","top","behavior","toggleModal","img","largeImageURL","prevProps","shouldRenderLoadMoreButton","container","Searchbar","App","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.28cc9eea.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1MPLn\",\"search_form\":\"Searchbar_search_form__lAleK\",\"search_form_input\":\"Searchbar_search_form_input__EUqZY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_backdrop\":\"Modal_modal_backdrop__1Nb_i\",\"modal_content\":\"Modal_modal_content__2FV5E\",\"modal_img\":\"Modal_modal_img__2-apz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photo_card\":\"ImageGalleryItem_photo_card__2dw2y\",\"photo_img\":\"ImageGalleryItem_photo_img__39_8u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container_loader\":\"LoaderGalery_container_loader___o70M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"load_more\":\"Button_load_more__2hOlE\",\"search_btn\":\"Button_search_btn__1jzu3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery_list\":\"GalleryImage_gallery_list__2oFzk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"GalleryView_container__3iay3\"};","import React from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nimport css from './LoaderGalery.module.css'\n\nconst LoaderGalery = () => { \n    return (\n      <div className={css.container_loader}>\n        <Loader\n          type=\"Watch\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n        />\n      </div>\n    );\n  }\n\nexport default LoaderGalery;\n","import React, { Component } from \"react\";\nimport { ImSearch } from \"react-icons/im\";\nimport { IconContext } from \"react-icons\";\n\nimport css from './Button.module.css'\n\nexport default class Button extends Component {\n\n    render() {\n        const { type, text, className } = this.props;\n        let onClick = this.props.onClick ? this.props.onClick : null\n\n        return (\n        <button\n            type={type}\n            className={css[className]}\n            onClick={onClick}\n        >\n                {text ? text :\n                    <IconContext.Provider value={{ size:\"1.4em\",color: 'gray' }}>\n                        <ImSearch />\n                    </IconContext.Provider>}\n        </button>\n        );\n    }\n}\n\n","import React, { Component } from 'react';\n\nimport Button from '../Button/Button';\n\nimport css from './Searchbar.module.css'\n\nclass SearchForm extends Component {\n  state = { query: '' };\n\n  handleChange = e => {\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n      return (              \n        <header className={css.searchbar}>\n            <form className={css.search_form} onSubmit={this.handleSubmit}>\n                <Button \n                    type=\"submit\"\n                    className=\"search_btn\"\n                />\n                <input\n                className={css.search_form_input}\n                type=\"text\"\n                autoComplete=\"off\"\n                autoFocus\n                placeholder=\"Search images and photos\"\n                value={this.state.query}\n                onChange={this.handleChange}\n                />\n            </form>\n        </header>\n    );\n  }\n}\n\nexport default SearchForm;\n\n\n\n\n\n","const fetchGallery = ({ searchQuery = '', currentPage = 1, pageSize = 12 }) => {\r\n    const url = \"https://pixabay.com/api/\";\r\n    const key = \"22580473-9722fdac11ed5197610aea928\";\r\n    const options = \"image_type=photo&orientation=horizontal\";\r\n    const BASE_URL = `${url}?q=${searchQuery.trim()}&page=${currentPage}&key=${key}&${options}&per_page=${pageSize}`;\r\n    return fetch(BASE_URL)\r\n            .then(response => response.json());\r\n};\r\n\r\nexport default  {fetchGallery} ;","    import React, { Component } from 'react';\r\n    import { createPortal } from 'react-dom';\r\n    import css from './Modal.module.css';\r\n\r\n    const modalRoot = document.querySelector('#modal-root');\r\n\r\n    export default class Modal extends Component {\r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    handleKeyDown = e => {\r\n        if (e.code === 'Escape') {\r\n            this.props.onClose();\r\n        }\r\n    };\r\n\r\n    handleBackdropClick = event => {\r\n        if (event.currentTarget === event.target) {\r\n            this.props.onClose();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {imgUrl, imgAlt} = this.props.imgModal\r\n        return createPortal(\r\n            <div className={css.modal_backdrop} onClick={this.handleBackdropClick}>\r\n                <div className={css.modal_content}>\r\n                    <img src={imgUrl} alt={imgAlt} className={css.modal_img}/>\r\n                </div>\r\n        </div>,\r\n        modalRoot,\r\n        );\r\n    }\r\n}","import { Component } from \"react\";\r\n\r\nimport css from \"./GalleryImage.module.css\";\r\n\r\nexport default class GalleryImage extends Component {\r\n    render() {\r\n        return (\r\n            <ul className={css.gallery_list}>\r\n                {this.props.children}\r\n            </ul>\r\n        );\r\n    }\r\n}\r\n","import { Component } from \"react\";\n\nimport css from \"./ImageGalleryItem.module.css\";\n\nexport default class ImageGallery extends Component {\n\n  render() {\n    const gallery = this.props.gallery;\n    const onClick = this.props.onClick ? this.props.onClick : null\n    return (\n      <>\n        {gallery.map((el) =>   \n          <li key={`${el.id}${el.webformatURL}`} onClick={()=>this.props.onClick(el)} className={css.photo_card}>\n            <img src={el.webformatURL} alt={el.tags} className={css.photo_img}/>\n          </li>\n        )}\n      </>\n    );\n  }\n}\n","import React, { Component } from 'react';\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport LoaderGalery from '../components/Loader/LoaderGalery';\r\nimport Searchbar from '../components/Searchbar/Searchbar';\r\nimport galleryApi from '../services/gallery-api';\r\nimport Button from '../components/Button/Button';\r\nimport Modal from '../components/Modal/Modal';\r\nimport GalleryImage from '../components/GalleryImage/GalleryImage';\r\nimport ImageGalleryItem from '../components/ImageGalleryItem/ImageGalleryItem';\r\n\r\nimport css from './GalleryView.module.css';\r\n\r\nclass GalleryView extends Component {\r\n    state = {\r\n        gallery: [],\r\n        currentPage: 1,\r\n        searchQuery: '',\r\n        isLoading: false,\r\n        error: null,\r\n        showModal: false,\r\n        imgModal: null\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevState.searchQuery !== this.state.searchQuery) {\r\n            if (this.state.searchQuery === ''){\r\n                 return toast.error(\"Search must not be empty!\");\r\n            }\r\n            this.fetchGallery();\r\n        }\r\n        if (prevState.searchQuery === this.state.searchQuery && this.state.searchQuery === '') {\r\n            toast.error(\"Search must not be empty!\");\r\n        }\r\n    }\r\n\r\n    onChangeQuery = query => {\r\n        this.setState({\r\n        searchQuery: query.trim(),\r\n        currentPage: 1,\r\n        gallery: [],\r\n        error: null,\r\n        });\r\n    };\r\n\r\n    fetchGallery = () => {\r\n        const { currentPage, searchQuery } = this.state;\r\n        const options = { searchQuery, currentPage };\r\n\r\n        this.setState({ isLoading: true });\r\n        \r\n        galleryApi\r\n            .fetchGallery(options)\r\n            .then(gallery => {\r\n                if (!gallery.hits.length) {\r\n                    return toast.error(`The given request ${searchQuery} is not available!!!`)\r\n                }\r\n                this.setState(prevState => ({\r\n                    gallery: [...prevState.gallery, ...gallery.hits],\r\n                    currentPage: prevState.currentPage + 1,\r\n                }));\r\n            })\r\n            .catch(error => this.setState({ error }))\r\n            .finally(() => {\r\n                this.setState({ isLoading: false });\r\n                this.showScroll(currentPage)\r\n            });\r\n    };\r\n    \r\n    showScroll = (currentPage) =>{\r\n        if (currentPage > 1) {\r\n            const cardHeight = document.querySelector('ul')\r\n                    .firstElementChild\r\n                    .getBoundingClientRect()\r\n                    .height;\r\n            const yOffset = window.pageYOffset;      // текущее положение скролбара\r\n                window.scrollTo({\r\n                    top: yOffset + cardHeight * 2,\r\n                    behavior: 'smooth',\r\n                });\r\n            }\r\n    }\r\n\r\n    toggleModal = (img) => {\r\n        const imgModal = img ? { imgUrl: img.largeImageURL, imgAlt: img.tags } : null\r\n        this.setState(({ showModal }) => ({\r\n            showModal: !showModal,\r\n            imgModal: imgModal\r\n        }));\r\n    };\r\n\r\n  render() {\r\n    const { gallery, isLoading, showModal, imgModal } = this.state;\r\n    const shouldRenderLoadMoreButton = gallery.length > 12 && !isLoading;\r\n    return (\r\n        <div className={css.container}>\r\n\r\n            <Searchbar onSubmit={this.onChangeQuery} />\r\n                \r\n            <GalleryImage >\r\n                <ImageGalleryItem gallery={gallery} onClick={ this.toggleModal}/>\r\n            </GalleryImage>\r\n            \r\n            {showModal && (\r\n                <Modal onClose={this.toggleModal} imgModal={imgModal}/>\r\n            )}\r\n\r\n            {isLoading && <LoaderGalery/>}\r\n\r\n            {shouldRenderLoadMoreButton && \r\n                <Button \r\n                    type=\"button\"\r\n                    onClick={this.fetchGallery}\r\n                    text=\"Load more\"\r\n                    className=\"load_more\"\r\n                    isLoading={!isLoading}\r\n                />\r\n            }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GalleryView;\r\n","import React from 'react';\n//import { Switch, Route, Link } from 'react-router-dom';\n//import TodosView from './views/TodosView';\nimport { ToastContainer } from 'react-toastify';\nimport GalleryView from './view/GalleryView';\n\nconst App = () => (\n  <>\n        <GalleryView />\n        <ToastContainer\n            position=\"top-right\"\n            autoClose={3000}/>\n  </>\n);\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}